# JavaWeb概述

## 设计技术

1. 控制浏览器的技术
   * HTML
   * CSS
   * JavaScript
2. 控制硬盘上数据库行为技术
   * Mysql数据库服务器管理使用
   * JDBC规范
3. 控制服务端Java行为技术
   * Http服务器
   * Servlet
   * JSP
4. 互联网通信流程开发规则
   * MVC

-------------------------

## 互联网通信

> 两台计算机通过网络实现文件共享行为

### 互联网通信角色划分

* 客户端计算机
  * 用于发送请求，来索要资源文件的计算机
* 服务端计算机
  * 用于接收请求，并提供对应的资源文件计算机

----------------

### 互联网通信模型

1. C/S通信模型
   * C —— Client softwarre：客户端软件
     * 客户端软件专门安装在客户端计算机上
     * 帮助客户端计算机向指定服务端计算机发送请求，索要资源文件
     * 帮助客户端计算机将服务端计算机发送回来的`二进制数据`解析（图片，文字，视频，数字，命令）
   * S —— Server software：服务器软件
     * 服务器软件专门安装在服务端计算机上
     * 服务区软件主要接收来自于特定的客户端软件发送请求
     * 服务器软件在接收到请求之后自动的在服务端计算机上定位被访问的资源文件
     * 服务器软件自动地将定位地文件内容解析为二进制数据，通过网络发送回发起请求的客户端软件上
   * 优点：
     1. 安全性较高
     2. 有效地降低服务端计算机工作压力
        * 三行命令可以只运行一行，发送到客户端再运行剩余两行
   * 缺点：
     1. 增加客户获得服务的成本
     2. 更新较为繁琐
2. B/S通信模式
   * B —— Browser：浏览器
     * 浏览器安装在客户端计算机软件
     * 可以向任意服务器发送请求，索要资源文件
     * 可以将服务器返回的`二进制数据`解析为`文字数字图片视频命令`
   * S —— Server software：服务器软件
     * 服务器软件专门安装在服务端计算机上
     * 可以接收任意浏览器发送请求
     * 自动地在服务端计算机上定位被访问地资源文件
     * 自动地将定位的资源文件以二进制形式发送回发起请求的浏览器上
   * 优点：
     1. 不会增加用户获得服务的成本
     2. 几乎不需要更新浏览器
   * 缺点：
     1. 几乎无法有效对服务端计算机资源文件进行保护
     2. 服务端计算机工作压力异常巨大 ---> **B/S通信下高并发解决方案**

----------------------

## 共享资源文件

> 可以通过网络进行传输的文件，都被称为共享资源文件
>
> 所有的文件内容都可以通过网络传输，所有文件都是共享资源文件

### Http服务器下对于共享资源文件的分类

* 静态资源文件
* 动态资源文件

--------------

#### 静态资源文件

1. 文件内容是固定的，可以被称为静态资源文件（文档、图片、视频）
2. 文件存放的不是内容，而是命令，这些命令**只能在浏览器编译与执行**，可以被称为静态资源文件（.html，.css，.js）

#### 动态资源文件

* 如果文件存放命令，并且命令不能在浏览器编译与执行；**只能在服务端计算机编译执行**，这样的文件可以被称为动态资源文件（.class）

--------------------

#### 静态资源文件与动态资源文件调用区别

* 静态文件：被索要时，Http服务器直接通过`输出流`将静态文件中内容或命令以`二进制形式`推送给发起请求浏览器
* 动态文件：被索要时，Http服务器需要创建当前class文件的实例对象，通过实例对象调用对应的方法处理用户请求，通过`输出流`将运行结果以`二进制形式`推送给发起请求的浏览器

```java
//比如以下.class文件
Class Student{
	public int add(int num1, int num2){
		int sum = num1 + num2;
		return sum;
	}
}

//Http服务器会自动创建以下实例
Student stu = new Student();
int 结果 = stu.add(10,20);
```

![互联网通信流程图](E:\我的坚果云\Java\JavaWeb\互联网通信介绍.assets\image-20210120105605893.png)

------------------

## 开发人员在互联网通信流程中担负职责

* 控制浏览器的请求方式
  * 控制浏览器发送的请求地址
  * 控制浏览器发送请求地址
  * 控制浏览器发送请求携带参数
* 开发动态资源文件解决用户请求
* 控制浏览器接受结果行为

![开发人员在互联网通信流程中的担负职责](E:\我的坚果云\Java\JavaWeb\互联网通信介绍.assets\image-20210120110434621.png)

-------------

## 网络协议

> 通过网络协议，可以让接收方迅速知道获取的信息内容

1. FTP网络协议包
2. Http网络协议包

-----------------------

### Http网络协议包

> 在基于B/S结构下互联网通信过程中，所以在网络中传递信息都是保存在Http网络协议包

分类：

* Http请求协议包
* Http响应协议包

------------------

#### Http请求协议包

* 在浏览器准备发送请求时，负责创建一个Http请求协议包
* 浏览器将请求信息以二进制形式保存在Http请求协议包的各个空间
* 由浏览器负责将Http请求协议包推送到指定服务器计算机

##### Http请求协议包内部空间（牢记）

按照自上而下划分，分为四个空间：

1. 请求行

```
{
	url: 请求地址（http://www.baidu.com/）
	method: 请求方式（GET/POST）
}
```

2. 请求头

```
{
	请求参数信息（GET的情况才会保存在这里）
}
```

3. 空白行

```
{
	无任何内容，作为隔离作用存在
}
```

4. 请求体

```
{
	请求参数信息（POST的情况才会保存在这里）
}
```

------------

#### Http响应协议包

* Http服务器在定位到被访问的资源文件后
* 负责创建一个Http响应协议包
* Http服务器将定位文件内容或者文件命令以二进制形式写入到Http响应协议包的各个空间
* 由Http服务器负责将Http响应协议包推送回发起请求的浏览器

##### Http响应协议包内部空间（牢记）

按照自上而下划分，分为四个空间：

1. 状态行 status 

```
{
	Http状态码
}
```

2. 响应头

```
{
	content-type（指定浏览器采用对应编译器，对响应体二进制数据进行解析，到底是【图片】【文字】balabala...）
}
```

3. 空白行

```
{
	没有任何内容，起隔离作用
}
```

4. 响应体

```
{
	可能被访问的静态资源文件内容
	可能被访问的静态资源文件命令
	可能被访问的动态资源文件运行结果
	*****以上都是二进制*****
}
```

--------

## 服务器

> 服务器，是一种安装在服务端计算机的资源文件调度器。
>
> 每一种服务器专门接受特定的请求协议。
>
> 对特定的文件进行调用管理。

### Http服务器

> Http服务器是服务器的一种，其行为与Http协议相关。
>
> Http服务器可以接受来自于**浏览器发送的Http请求协议包**（B/S通信模型），并自动对Http请求协议包内容进行解析。
>
> 解析后，自动定位被访问的文件，并将定位的问价内容写入到Http响应协议包中。
>
> 最后，负责将Http响应协议包推送回发起请求的浏览器上。

Http服务器主要分为以下几种：

* JBOSS服务器
  * 由JBOSS公司研发的，基于J2EE开源代码的应用服务器
  * 核心服务不包括支持servlet/JSP的web容器
  * 一般与Tomcat或Jetty绑定使用
* Glassfish服务器
  * SUN开发的，免费开源，基于JavaEE的引用服务器
  * 还没有出，可能在未来替代tomcat服务器
* Websphere服务器
  * IBM研发的HTTP服务器。主要应用于电子商务
  * 公认为现阶段最强大的服务器
  * 主要安装在LINUX系统上，不适合安装在windows系统上
* Tomcat
  * Apache的核心项目，由Java技术研发
  * Servlet和HSP规范可以在其中完美体现
  * 属于轻量级应用服务器，只能在中小型系统和并发访问用户不多的场合下使用
  * 一般大家会在自己电脑上配置一个Tomcat服务器，来模拟B/S结构的互联网通信流程

### Tomcat

🙋‍ 由于Tomcat是由java技术开发的，所以必须提前设置JDK的环境变量JAVA_HOME（有的电脑还需要设置CATALINA_HOME指向Tomcat的地址）

#### Tomcat内部文件结构

以下是对每个文件夹进行简单介绍其功能：

* bin —— 管理命令中心
  * startup
  * shutdown
* conf —— 核心配置文件
  * 内含两种格式的文件：properties与xml
  * 其中最重要的是server.xml文件，保存了端口号等配置信息
* lib —— 存放jar包
* logs —— 日志信息
* temp —— 临时文件
* webapps —— 资源文件
* work —— 工作区

#### 利用Tomcat模拟一次互联网通信

1. 在Tomcat安装地址/webapps文件夹内创建一个网站【myWeb】
2. 将一个静态资源文件添加到网站【cake.jpg】
3. 启动tomcat
4. 启动浏览器，命令浏览器向tomcat索要cake.jpg

URL格式：

```
网络协议包://服务端计算机IP地址:Http服务器端口号/网站名/资源文件名称
```

![image-20210122161735027](E:\我的坚果云\Java\JavaWeb\互联网通信介绍.assets\image-20210122161735027.png)

![image-20210122163135074](E:\我的坚果云\Java\JavaWeb\互联网通信介绍.assets\image-20210122163135074.png)

#### 利用IDEA和Tomcat创建网站

网站内部结构：

* src文件夹：存放作为动态资源文件的Java文件
* web文件夹：
  * 存放作为静态资源的文件【图片/html/css/js】
  * 存放网站运行时依赖的jar包【比如mysql驱动】
  * 存放网站的核心配置文件【web.xml】

![image-20210122184838865](E:\我的坚果云\Java\JavaWeb\互联网通信&&Tomcat.assets\image-20210122184838865.png)

发布网站 —— 将网站交给Tomcat管理

1. Run -> Edit configurations ->Tomcat Server -> Deployment（前提是已经在Templates里配置好了Tomcat）

   ![image-20210122185032273](E:\我的坚果云\Java\JavaWeb\互联网通信&&Tomcat.assets\image-20210122185032273.png)

2. 通过网页url访问网站内容

